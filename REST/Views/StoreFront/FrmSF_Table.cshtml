@{
    ViewData["Title"] = "Store Front";
    ViewData["System"] = "ข้อมูลโต๊ะอาหาร";
    Layout = "_StoreFront";
    var Table = ViewBag.Table;
    var OrderSub = ViewBag.OrderSub;
}

@section Styles {
    <link href="~/Plugins/DataTables/DataTables-1.10.21/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
}

<div class="card mb-3">    
    <div class="card-body">      
        <div class="row">
            <div class="col-xl-11 mx-auto">
                ข้อมูล
                <hr />
                <div class="row">
                    <div class="col-xl-7 mx-auto">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-5 col-form-label col-form-label-sm text-sm-right">รหัส :</label>
                                    <div class="col-sm-7">
                                        @*<input type="text" class="form-control form-control-sm" value="@Table.TableId">*@
                                        <p class="col-form-label-sm border-bottom mb-0">@Table.TableId</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-5 col-form-label col-form-label-sm text-sm-right">ชื่อโต๊ะ :</label>
                                    <div class="col-sm-7">
                                        @*<input type="text" class="form-control form-control-sm" value="@Table.TableName">*@
                                        <p class="col-form-label-sm border-bottom mb-0">@Table.TableName</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-5 col-form-label col-form-label-sm text-sm-right">สถานะ :</label>
                                    <div class="col-sm-7">
                                        @{
                                            string bg = "";
                                            if (Table.TableST == 1)
                                            {
                                                bg = "text-success";
                                            }
                                            else if (Table.TableST == 2)
                                            {
                                                bg = "text-danger";
                                            }
                                            else if (Table.TableST == 3)
                                            {
                                                bg = "text-warning";
                                            }
                                            <p class="col-form-label-sm border-bottom mb-0"><span class="@bg"><i class="fas fa-circle"></i>&nbsp;</span>@Table.Status</p>
                                        }
                                    </div>
                                </div>
                            </div>                           
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-5 col-form-label col-form-label-sm text-sm-right">จำนวน :</label>
                                    <div class="col-sm-7">
                                        @*<input type="text" class="form-control form-control-sm">*@
                                        <p class="col-form-label-sm border-bottom mb-0 text-right">0</p>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-5 col-form-label col-form-label-sm text-sm-right">ราคาทั้งหมด :</label>
                                    <div class="col-sm-7">
                                        @*<input type="text" class="form-control form-control-sm">*@
                                        <p class="col-form-label-sm border-bottom mb-0 text-right">0.00</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
        <div class="row">
            <div class="col-xl-11 mx-auto">
                <hr />
                <div class="text-center">
                    <a href="#" class="btn btn-sm btn-warning @ViewData["Disible"]"><i class="fas fa-tag"></i>&nbsp;&nbsp;ชำระเงิน</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-xl-11 mx-auto">
                รายการอาหาร
                <hr />
                <table class="table table-md table-bordered" id="DT_Table">
                    <thead class="thead-light">
                        <tr>
                            <th class="text-center" style="width:5%;">ลำดับ</th>
                            <th class="text-center">ชื่อ</th>
                            <th class="text-center text-info" style="width:5%;"><i class="fas fa-info-circle"></i></th>
                            <th class="text-center" style="width:20%;">ราคา</th>
                            <th class="text-center" style="width:20%;">จำนวน</th>
                            <th class="text-center" style="width:5%;">ครั้ง</th>
                            <th class="text-center" style="width:5%;">#</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            if (OrderSub.Count > 0)
                            {
                                var x = 0;
                                foreach (var row in ViewBag.OrderSub)
                                {
                                    x++;
                                    <tr>
                                        <td class="text-center">@x</td>
                                        <td>@row.FoodName</td>
                                        @if (row.Status == 1)
                                        {
                                            <td class="text-center text-danger"><i class="far fa-times-circle"></i></td>
                                        }
                                        else if (row.Status == 2)
                                        {
                                            <td class="text-center text-warning"><i class="fas fa-diagnoses"></i></td>
                                        }
                                        else if (row.Status == 3)
                                        {
                                            <td class="text-center text-success"><i class="far fa-check-circle"></i></td>
                                        }
                                        <td class="text-right">@row.Price.ToString("N2")</td>
                                        <td class="text-right">@row.Amount</td>
                                        <td class="text-center">@row.i</td>
                                        <td class="text-center"><button type="button" class="btn btn-table-sm btn-danger-light text-danger"><i class="far fa-trash-alt"></i></button></td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="7" class="text-center">no order</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>        
    </div>
</div>   


@section Scripts {
    <script src="~/Plugins/DataTables/datatables.min.js"></script>
    <script src="~/Plugins/DataTables/DataTables-1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#DT_Table').DataTable({
                "info": false,
                "ordering": false,
            });
        });
    </script>
}
